(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{44:function(e,t,r){},47:function(e,t,r){e.exports={chartContainer:"Chart_chartContainer__kabZ-",tooltip:"Chart_tooltip__327dg",label:"Chart_label__1gBTW"}},59:function(e,t,r){},85:function(e,t,r){},86:function(e,t,r){},87:function(e,t,r){},88:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r.n(a),n=r(18),i=r.n(n),s=r(31),d=r(3),u=(r(59),r(17)),j=r(14),o=r(2),h=function(e){return Object(o.jsxs)("div",{className:"weather-details",children:[Object(o.jsx)("div",{className:"city",children:e.city}),Object(o.jsxs)("div",{className:"temperature",children:[e.temperature," \xb0 C"]}),Object(o.jsx)("div",{className:"descript",children:e.descript}),Object(o.jsxs)("div",{className:"humidity",children:["\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c ",e.humidity," %"]}),Object(o.jsxs)("div",{className:"windSpeed",children:["\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430 ",e.windSpeed," \u043c/c"]})]})},l=r(19),b=r(16),p=r.n(b),m=r(22),O=r(46),x="4551927ed89918c0f0992a61b88ea970",f=r.n(O).a.create({baseURL:"http://api.openweathermap.org/data/2.5"}),y=function(e,t){return f.get("/weather?q=".concat(e,"&appid=").concat(x,"&units=metric"))},v=function(e){return f.get("/forecast?q=".concat(e,"&appid=").concat(x,"&units=metric")).then((function(e){return e.data}))},w=r(30),C=Object(w.b)({name:"weather",initialState:{citiesWeather:[]},reducers:{addCityWeather:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{citiesWeather:[t.payload.cityWeather]})},refetchCityWeather:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{citiesWeather:e.citiesWeather.map((function(e){return e.id===t.payload.id&&(e.weather=t.payload.weather,e.city=t.payload.name),e}))})},setCities:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{citiesWeather:t.payload.citiesWeather})}}}),N=C.reducer,W=C.actions,g=W.addCityWeather,k=(W.refetchCityWeather,W.setCities,function(e){return function(){var t=Object(m.a)(p.a.mark((function t(r){var a,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(e);case 3:if("200"!==(a=t.sent).cod){t.next=10;break}return c={city:(n=a).city.name,country:n.city.country,weather:n.list,id:Date.now(),tempScale:"C"},t.next=8,r(g({cityWeather:c}));case 8:return t.abrupt("return",c);case 10:return t.abrupt("return",null);case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}var n}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}),M={time:0,temperature:0,humid:0,weatherCode:0,descript:"",windSpeed:0},_=function(e){var t=Object(a.useState)(Object(u.a)({},M)),r=Object(j.a)(t,2),c=r[0],n=r[1],i=Object(l.b)();return Object(a.useEffect)((function(){i(function(e,t){return function(r){y(e,t).then((function(e){return e.data})).then((function(r){var a=new Date,c=a.getHours(),n=a.getMinutes();t({time:c,minutes:n,city:e,temperature:Math.round(r.main.temp),humid:Math.round(r.main.humidity),descript:r.weather[0].description,weatherCode:r.weather[0].id,windSpeed:r.wind.speed})})).catch((function(e){return console.error(e)}))}}(e.city,n))}),[]),Object(o.jsx)("div",{className:"widget",children:Object(o.jsx)(h,{city:e.city,temperature:c.temperature,humidity:c.humid,descript:c.descript,windSpeed:c.windSpeed})})},S=(r(44),r(28)),D=r(47),H=r.n(D),T=(r(85),r(103)),B=function(e){var t=e.data.filter((function(e){return e.date.includes("15:00")}));return Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:Object(o.jsx)(T.a,{children:"Date"})}),Object(o.jsx)("th",{children:Object(o.jsx)(T.a,{children:"Temperature"})})]})}),Object(o.jsx)("tbody",{children:t.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.date}),Object(o.jsxs)("td",{children:[e.Temperature,"\u2103"]})]},e.id)}))})]})},q=c.a.memo((function(e){var t=e.allDaysWeatherData.map((function(e){return{date:Object(S.a)(e.dt_txt,"dd.mm HH:MM"),Temperature:Math.floor(e.main.temp)}}));return Object(o.jsx)("div",{className:H.a.chartContainer,children:Object(o.jsx)(B,{data:t})})})),E=function(e){console.log(e.day.weather[0]);var t=e.day.weather[0],r=Object(S.a)(t.dt_txt,"ddd, d mmmm, HH:MM");return Object(o.jsx)("div",{className:"card",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{className:"card-title",children:r}),Object(o.jsxs)("h2",{children:[Math.round(t.main.temp)," \xb0C"]}),Object(o.jsx)("div",{className:"card-body",children:Object(o.jsx)(q,{allDaysWeatherData:e.day.weather})})]})})},J=(r(86),r(104)),F=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),r=t[0],c=t[1],n=Object(l.b)(),i=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return e.next=3,n(k(t||r));case 3:if(!e.sent){e.next=7;break}return c(""),e.abrupt("return");case 7:e.next=10;break;case 9:console.log("error");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"searchWrapper",children:[Object(o.jsx)(J.a,{value:r,onChange:function(e){c(e.currentTarget.value)},type:"text"}),Object(o.jsx)(T.a,{onClick:function(){return i()},children:"Find"})]})},I=l.c,L=function(){var e=I((function(e){return e.weather})).citiesWeather;return Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("h1",{className:"display",children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b \u043d\u0430 5 \u0434\u043d\u0435\u0439"}),Object(o.jsx)(F,{}),Object(o.jsx)("div",{className:"display",children:e.map((function(e,t){return Object(o.jsx)(E,{day:e},e.id)}))})]})},R=function(){return Object(o.jsxs)("div",{className:"app-container",children:[Object(o.jsx)(T.a,{variant:"outlined",children:Object(o.jsx)(s.b,{className:"app-header",to:"/extended",children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b \u043d\u0430 5 \u0434\u043d\u0435\u0439"})}),Object(o.jsxs)("div",{className:"app",children:[["Moscow","Minsk","Bratislava"].map((function(e){return Object(o.jsx)(_,{city:e},e)})),Object(o.jsx)("div",{children:Object(o.jsx)(d.c,{children:Object(o.jsx)(d.a,{path:"/extended",element:Object(o.jsx)(L,{})})})})]})]})},U=(r(87),r(10)),Z=r(24),z=Object(U.b)({weather:N}),A=Object(w.a)({reducer:z,middleware:function(e){return e().prepend(Z.a)}});window.store=A,i.a.render(Object(o.jsx)(s.a,{children:Object(o.jsx)(l.a,{store:A,children:Object(o.jsx)(R,{})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.23b21269.chunk.js.map